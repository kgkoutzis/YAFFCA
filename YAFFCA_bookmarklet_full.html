<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Yet Another Facebook Friendslist Comparer App (YAFFCA) - Bookmarklet</title>
	</head>
	<body>
		<a id="YAFFCAv1full" rel="nofollow" 
		
		style=
		"
			background-color: #3C5A96;
			border-radius: 4px;
			box-shadow: 1px 1px 4px rgba(0, 0, 0, 1);
			box-sizing: border-box;
			color: #E6E6E6;
			display: block;
			font-size: 1.3em;
			height: 100px;
			margin: 0px auto 1em;
			padding: 30px;
			text-align: center;
			text-decoration: none;
			text-shadow: 0px -1px 0px rgba(0, 0, 0, 1);
			width:200px;
		" 
		
		title="Drag-and-drop this onto your bookmarks toolbar" 
		
		href="javascript:
		(
			function()
			{
				function e(c)
				{
					return document.getElementsByClassName(c)
				}
				
				function k(g)
				{
					if(g>=f)
					{
						z(t);
						return;
					}
			
					var b=n[g].innerHTML;

					var w;

					if((w=b.indexOf('\''))!=-1)
						b=b.substr(0,w)+'`'+b.substr(w+1);
				
					var r=new FileReader();
				
					r.onload=function(v)
					{
						t+='<div class=\'friend\' id=\''+i[g].value+'\'><a href=\''+l[g].href+'\'><img src=\'';
						t+=v.target.result;
						t+='\' alt=\''+b+'\' title=\''+b+'\'/>'+b+'</a></div>';
						document.title=Math.round(g/f*100)+'%25';
						k(++g);
					};
					var x=new XMLHttpRequest();
					x.open('GET',p[g+o].src);
					x.responseType='blob';
					x.onload=function()
					{
						r.readAsDataURL(x.response);
						return;
					};
					x.send();
					return;
				}
				
				function z(t)
				{
					document.head.innerHTML='<style>a{text-decoration:none;}</style>';
					document.body.removeAttribute('class');
					document.body.removeAttribute('dir');
					document.getElementsByTagName('html')[0].removeAttribute('id');
					document.getElementsByTagName('html')[0].removeAttribute('class');
					document.body.style.color='#3C5A96';
					document.body.style.backgroundColor='#E6E6E6';
					var d=new Date();
					var y=d.getFullYear();
					var m=d.getMonth()+1;
					if(y<10)y='0'+y;
					if(m<10)m='0'+m;
					document.title='YAFFCA ~ '+y+'-'+m+'-'+d.getDate()+' ~ '+f+' Active Friends';
					t+='<div id=\'YAFFCAv1\' style=\'color:#000;margin-top:44px;\'>Generated by the <a href=\'https://kgk.gr/YAFFCA/\' title=\'YAFFCA\' target=\'_blank\'>YAFFCA (v1)</a> bookmarklet, created by <a href=\'https://kgk.gr\' title=\'KGK\' target=\'_blank\'>Konstantinos Gkoutzis</a>.</div>';
					document.body.innerHTML=t;
				}
				var n=e('text');
				var l=e('viewProfile');
				var i=e('checkbox');
				var p=e('scaledImageFitWidth');
				var f=n.length;
				var o=p.length-f;
				var q=false;
				var s=false;
				var t='';
				if(typeof(n)=='undefined'||n.length==0)
				{
					t='<span style=\'color:#F00;\'>Friendslist not found. Are you on the right page? Please refresh and try again.</span>';
					z(t);
					return;
				}
				if(q=confirm('Do you also want the photos? [OK=Yes, Cancel=No]'))
					if(s=confirm('Merge the photos with the list (slower)? [OK=Yes, Cancel=No]'));
				if(s)
					k(0);
				else
				{
					for(g=0; g<f; g++)
					{
						var b=n[g].innerHTML;
						var w;
						if((w=b.indexOf('\''))!=-1)
							b=b.substr(0,w)+'`'+b.substr(w+1);
						t+='<div class=\'friend\' id=\''+i[g].value+'\'><a href=\''+l[g].href+'\'>'+((q)?'<img src=\''+p[g+o].src+'\' alt=\''+b+'\' title=\''+b+'\'/>':'')+b+'</a></div>';
					}
					z(t);
				}
			}
		)()"
		>YAFFCA v1</a>
	</body>
</html>
